var h=(s,r,o)=>new Promise((t,e)=>{var n=i=>{try{a(o.next(i))}catch(m){e(m)}},c=i=>{try{a(o.throw(i))}catch(m){e(m)}},a=i=>i.done?t(i.value):Promise.resolve(i.value).then(n,c);a((o=o.apply(s,r)).next())});import{c as d,r as y,a as v,b as E,d as P,_ as R,e as k,o as O,f as A,g as I,h as b,s as j,i as w,j as S}from"./vendor.99ed0ea4.js";const V=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}};V();const C="modulepreload",L={},D="/assets/easytouchpos/posapp/",p=function(r,o){return!o||o.length===0?r():Promise.all(o.map(t=>{if(t=`${D}${t}`,t in L)return;L[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const c=document.createElement("link");if(c.rel=e?"stylesheet":C,e||(c.as="script",c.crossOrigin=""),c.href=t,document.head.appendChild(c),e)return new Promise((a,i)=>{c.addEventListener("load",a),c.addEventListener("error",i)})})).then(()=>r())},f=d({url:"frappe.auth.get_logged_user",cache:"User",onError(s){s&&s.exc_type==="AuthenticationError"&&l.push({name:"LoginPage"})}});function _(){let r=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return r==="Guest"&&(r=null),r}const u=y({login:d({url:"login",makeParams({email:s,password:r}){return{usr:s,pwd:r}},onSuccess(s){f.reload(),u.user=_(),u.login.reset(),l.replace(s.default_route||"/")}}),logout:d({url:"logout",onSuccess(){f.reset(),u.user=_(),l.replace({name:"Login"})}}),user:_(),isLoggedIn:v(()=>!!u.user)}),H=[{path:"/",name:"Public",redirect:"/",component:()=>p(()=>import("./layout.c805df7e.js"),["assets/layout.c805df7e.js","assets/pos-sheet.455eb8dc.js","assets/index.206caab4.js","assets/vendor.99ed0ea4.js","assets/vendor.dc87475e.css","assets/Input.ef2e7162.js"]),children:[{path:"/",name:"Home",component:()=>p(()=>import("./Home.4cf4cc81.js"),["assets/Home.4cf4cc81.js","assets/index.206caab4.js","assets/vendor.99ed0ea4.js","assets/vendor.dc87475e.css","assets/pos-sheet.455eb8dc.js"])},{path:"/recent-sales",name:"Recent Sales",component:()=>p(()=>import("./recent-sales.1ce07d2c.js"),["assets/recent-sales.1ce07d2c.js","assets/vendor.99ed0ea4.js","assets/vendor.dc87475e.css"])}]},{name:"Login",path:"/account/login",component:()=>p(()=>import("./Login.d6f51995.js"),["assets/Login.d6f51995.js","assets/vendor.99ed0ea4.js","assets/vendor.dc87475e.css","assets/index.206caab4.js","assets/Input.ef2e7162.js"])}];let l=E({history:P("/posapp"),routes:H});l.beforeEach((s,r,o)=>h(void 0,null,function*(){let t=u.isLoggedIn;try{yield f.promise}catch(e){t=!1}s.name==="Login"&&t?o({name:"Home"}):s.name!=="Login"&&!t?o({name:"Login"}):o()}));const N={};function T(s,r){const o=k("router-view");return O(),A("main",null,[I(o)])}var U=R(N,[["render",T]]);let g=b(U);j("resourceFetcher",S);g.use(l);g.use(w);g.mount("#app");export{u as s};
