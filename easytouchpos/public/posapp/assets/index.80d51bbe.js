var h=(s,r,o)=>new Promise((t,e)=>{var n=c=>{try{a(o.next(c))}catch(m){e(m)}},i=c=>{try{a(o.throw(c))}catch(m){e(m)}},a=c=>c.done?t(c.value):Promise.resolve(c.value).then(n,i);a((o=o.apply(s,r)).next())});import{c as f,r as y,a as v,b as E,d as P,_ as R,e as k,o as O,f as b,g as A,h as I,s as j,i as w,j as S}from"./vendor.9961411d.js";const V=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}};V();const C="modulepreload",L={},D="/assets/easytouchpos/posapp/",p=function(r,o){return!o||o.length===0?r():Promise.all(o.map(t=>{if(t=`${D}${t}`,t in L)return;L[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":C,e||(i.as="script",i.crossOrigin=""),i.href=t,document.head.appendChild(i),e)return new Promise((a,c)=>{i.addEventListener("load",a),i.addEventListener("error",c)})})).then(()=>r())},d=f({url:"frappe.auth.get_logged_user",cache:"User",onError(s){s&&s.exc_type==="AuthenticationError"&&l.push({name:"LoginPage"})}});function _(){let r=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return r==="Guest"&&(r=null),r}const u=y({login:f({url:"login",makeParams({email:s,password:r}){return{usr:s,pwd:r}},onSuccess(s){d.reload(),u.user=_(),u.login.reset(),l.replace(s.default_route||"/")}}),logout:f({url:"logout",onSuccess(){d.reset(),u.user=_(),l.replace({name:"Login"})}}),user:_(),isLoggedIn:v(()=>!!u.user)}),H=[{path:"/",name:"Public",redirect:"/",component:()=>p(()=>import("./layout.3578a2be.js"),["assets/layout.3578a2be.js","assets/Checkbox.6021d939.js","assets/index.12db4f15.js","assets/vendor.9961411d.js","assets/vendor.dc87475e.css","assets/Input.561c30a2.js"]),children:[{path:"/",name:"Home",component:()=>p(()=>import("./Home.4850cc35.js"),["assets/Home.4850cc35.js","assets/Checkbox.6021d939.js","assets/index.12db4f15.js","assets/vendor.9961411d.js","assets/vendor.dc87475e.css"])},{path:"/recent-sales",name:"Recent Sales",component:()=>p(()=>import("./recent-sales.555c9f63.js"),["assets/recent-sales.555c9f63.js","assets/vendor.9961411d.js","assets/vendor.dc87475e.css"])}]},{name:"Login",path:"/account/login",component:()=>p(()=>import("./Login.ff53cdaf.js"),["assets/Login.ff53cdaf.js","assets/vendor.9961411d.js","assets/vendor.dc87475e.css","assets/index.12db4f15.js","assets/Input.561c30a2.js"])}];let l=E({history:P("/posapp"),routes:H});l.beforeEach((s,r,o)=>h(void 0,null,function*(){let t=u.isLoggedIn;try{yield d.promise}catch(e){t=!1}s.name==="Login"&&t?o({name:"Home"}):s.name!=="Login"&&!t?o({name:"Login"}):o()}));const N={};function T(s,r){const o=k("router-view");return O(),b("main",null,[A(o)])}var U=R(N,[["render",T]]);let g=I(U);j("resourceFetcher",S);g.use(l);g.use(w);g.mount("#app");export{u as s};
