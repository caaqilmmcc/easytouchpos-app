var h=(s,r,o)=>new Promise((t,e)=>{var n=c=>{try{u(o.next(c))}catch(f){e(f)}},i=c=>{try{u(o.throw(c))}catch(f){e(f)}},u=c=>c.done?t(c.value):Promise.resolve(c.value).then(n,i);u((o=o.apply(s,r)).next())});import{c as d,r as y,a as v,b as E,d as P,_ as I,e as R,o as b,f as k,g as O,h as w,s as A,i as j,j as C,C as S,I as V,k as $}from"./vendor.10b8f296.js";const D=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}};D();const H="modulepreload",L={},N="/assets/posawesome/posapp/",m=function(r,o){return!o||o.length===0?r():Promise.all(o.map(t=>{if(t=`${N}${t}`,t in L)return;L[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":H,e||(i.as="script",i.crossOrigin=""),i.href=t,document.head.appendChild(i),e)return new Promise((u,c)=>{i.addEventListener("load",u),i.addEventListener("error",c)})})).then(()=>r())},_=d({url:"frappe.auth.get_logged_user",cache:"User",onError(s){s&&s.exc_type==="AuthenticationError"&&p.push({name:"LoginPage"})}});function g(){let r=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return r==="Guest"&&(r=null),r}const l=y({login:d({url:"login",makeParams({email:s,password:r}){return{usr:s,pwd:r}},onSuccess(s){_.reload(),l.user=g(),l.login.reset(),p.replace(s.default_route||"/")}}),logout:d({url:"logout",onSuccess(){_.reset(),l.user=g(),p.replace({name:"Login"})}}),user:g(),isLoggedIn:v(()=>!!l.user)}),T=[{path:"/",name:"Public",redirect:"/",component:()=>m(()=>import("./layout.27225f2a.js"),["assets/layout.27225f2a.js","assets/pos-sheet.bf84a44c.js","assets/index.4f245b34.js","assets/vendor.10b8f296.js","assets/vendor.dc87475e.css","assets/index.d61cfeb7.js"]),children:[{path:"/",name:"Home",component:()=>m(()=>import("./Home.200194e9.js"),["assets/Home.200194e9.js","assets/index.4f245b34.js","assets/vendor.10b8f296.js","assets/vendor.dc87475e.css","assets/pos-sheet.bf84a44c.js"])},{path:"/recent-sales",name:"Recent Sales",component:()=>m(()=>import("./recent-sales.24ccee0a.js"),["assets/recent-sales.24ccee0a.js","assets/vendor.10b8f296.js","assets/vendor.dc87475e.css"])}]},{name:"Login",path:"/account/login",component:()=>m(()=>import("./Login.1fb7d38b.js"),["assets/Login.1fb7d38b.js","assets/vendor.10b8f296.js","assets/vendor.dc87475e.css","assets/index.4f245b34.js","assets/index.d61cfeb7.js"])}];let p=E({history:P("/posapp"),routes:T});p.beforeEach((s,r,o)=>h(void 0,null,function*(){let t=l.isLoggedIn;try{yield _.promise}catch(e){t=!1}s.name==="Login"&&t?o({name:"Home"}):s.name!=="Login"&&!t?o({name:"Login"}):o()}));const U={};function q(s,r){const o=R("router-view");return b(),k("main",null,[O(o)])}var x=I(U,[["render",q]]);let a=w(x);A("resourceFetcher",$);a.use(p);a.use(j);a.component("Button",C);a.component("Card",S);a.component("Input",V);a.mount("#app");export{l as s};
